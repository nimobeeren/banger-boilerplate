# 💥 Banger Boilerplate 💥

_Inspired by [nice-boys/product-boilerplate](https://github.com/nice-boys/product-boilerplate)_

## The Stack

- [Next.js](https://nextjs.org/)
- [Apollo Client](https://www.apollographql.com/docs/react/)
- [GraphQL Code Generator](https://graphql-code-generator.com/)
- [Nexus Schema](https://nexus.js.org/)
- [Prisma 2](https://www.prisma.io/)
- [Apollo Server](https://www.apollographql.com/docs/apollo-server/)

## Project structure

Here's an overview of the files and directories in the project.

```
.
├── components/            // front-end components
│   └── ...
├── graphql/
│   ├── documents/         // GraphQL documents used by GraphQL codegen
│   │   └── ...            // structure doesn't matter
│   ├── generated/
│   │   ├── schema.graphql // Nexus schema output
│   │   └── codegen.ts     // GraphQL codegen output
│   ├── schema/            // code-first schema used by Nexus
│   │   └── index.ts
│   ├── createApolloClient.ts
│   └── createApolloServer.ts
├── lib/                   // external source code
│   └── apollo.tsx         // Apollo Client integration with Next.js
├── pages/
│   ├── api/
│   │   └── graphql.ts     // GraphQL route
│   ├── _app.tsx
│   └── index.tsx
├── prisma/
│   ├── .env               // db conection details
│   ├── dev.db             // SQLite database
│   └── schema.prisma      // interface between db and Prisma Client
├── public/
├── codegen.yml            // GraphQL codegen config
├── next-env.d.ts          // Next.js TypeScript types
├── nodemon.json           // nodemon config
├── package.json
├── styles.css             // basic CSS
└── ...
```

For the most important bits, here is some further explanation.

### 📂️ `graphql/`

Contains the GraphQL schema, Apollo client/server and generated artifacts.

#### 📂️ `graphql/documents/`

Contains `.graphql` files used to generate React hooks and types. These are exported from `graphql/generated/codegen.ts`. The file structure of this directory does not matter, all queries and mutations are automatically picked up by [GraphQL Code Generator](https://graphql-code-generator.com/).

#### 📂️ `graphql/generated/`

##### 📄️ `graphql/generated/codegen.ts`

Output of GraphQL Code Generator. By default, this includes React hooks for queries and mutations from `/graphql/documents` and TypeScript types. This can be configured in `/codegen.yml`

##### 📄️ `graphql/generated/schema.graphql`

GraphQL schema in Schema Definition Language, generated by Nexus. This is used by GraphQL Code Generator to generate types.

#### 📂️ `graphql/schema/`

Contains type definitions and resolvers, combined through a Nexus code-first schema. Usually contains an `index.ts` file that exports the output of `makeSchema` from `@nexus/schema`. For more complex schemas, I like to create a `types/` directory containing one `.ts` file for each type.

### 📂️ `lib/`

#### 📄️ `lib/apollo.tsx`

Integrates Apollo Client with Next.js. For more information see the [Next.js Apollo example](https://github.com/vercel/next.js/tree/61ace6ca03c1c683eb80f5df9bb07efe92f0bbb5/examples/with-apollo).

### 📂️ `prisma/`

_TODO_
